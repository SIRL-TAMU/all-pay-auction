<header>
    <div class="navbar">
        <div class="logo">
            <%= link_to "All Pay Auction", root_path %>
        </div>

        <ul class="links">
            <li><%= link_to "Home", root_path %></li>
            <li><%= link_to "Buy", buyer_dashboard_path %></li>
            <li><%= link_to "Sell", seller_dashboard_path %></li>
            <li><%= link_to "Auction Items", auction_items_path %></li>
        </ul>

       <% if logged_in? %>
            <span>
                Logged in as <%= current_user.first_name %> 
                (<%= session[:account_type].capitalize %>)
                Balance: $<%= number_to_currency(current_user.amount, unit: "", precision: 2) %>
            </span>
            <%= link_to "Logout", logout_path, method: :delete, class: "logout-btn" %>
        <% else %>
            <%= link_to "Login", login_path, class: "login-btn" %>
        <% end %>

        <div class="toggle-btn">
            <i class="fa-solid fa-bars"></i>
        </div>
    </div>

    <div class="dropdown-menu">
        <li><%= link_to "Home", root_path %></li>
        <li><%= link_to "Buy", buyer_dashboard_path %></li>
        <li><%= link_to "Sell", seller_dashboard_path %></li>
        
        <% if logged_in? %>
            <%= link_to "Logout", logout_path, method: :delete, class: "logout-btn" %>
        <% else %>
            <%= link_to "Login", login_path, class: "login-btn" %>
        <% end %>
    </div>

    <script>
        const toggleBtn = document.querySelector('.toggle-btn');
        const toggleBtnIcon = document.querySelector('.toggle-btn i');
        const dropDownMenu = document.querySelector('.dropdown-menu');

        toggleBtn.onclick = function () {
            dropDownMenu.classList.toggle('open');
            const isOpen = dropDownMenu.classList.contains('open');
            toggleBtnIcon.classList = isOpen ? "fa-solid fa-xmark" : "fa-solid fa-bars";
        }
    </script>
</header>
